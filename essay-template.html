<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essay - Raahul Singh</title>
    <meta name="description" content="An essay by Raahul Singh.">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
    
    <!-- Theme script early load to prevent flashing -->
    <script src="js/theme.js"></script>
    
    <!-- Components script for common elements -->
    <script src="js/components.js"></script>
    
    <!-- Central navigation handler - must be after components.js -->
    <script src="js/navigation.js"></script>
    
    <!-- Social links module for rendering social icons -->
    <script src="js/social-links.js"></script>
    
    <!-- MathJax for LaTeX support -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Markdown parser script - our custom implementation -->
    <script src="js/markdown-parser.js"></script>
</head>
<body>
    <!-- Header will be inserted by components.js -->
    <header></header>

    <main>
        <article class="essay-content">
            <header id="essay-header">
                <h1 id="essay-title"></h1>
                <div class="essay-meta">
                    <time id="essay-date"></time>
                </div>
                <div id="essay-tags" class="tags"></div>
            </header>

            <div id="essay-content">
                <p>Loading essay...</p>
            </div>
        </article>
    </main>

    <!-- Footer will be inserted by components.js -->
    <footer></footer>

    <script src="js/main.js" defer></script>
    
    <script>
        // Get essay ID and call the parser function
        document.addEventListener('DOMContentLoaded', function() {
            // Try to get the essay ID from localStorage
            const essayId = localStorage.getItem('selectedEssay');
            const containerId = 'essay-content'; // ID of the div to load content into
            
            console.log('Retrieved essayId from localStorage:', essayId);
            
            if (essayId) {
                const markdownPath = 'essays/' + essayId + '.md';
                console.log('Constructed markdownPath:', markdownPath);
                
                // Call the function defined in markdown-parser.js
                loadAndRenderMarkdown({ containerId, markdownPath });
            } else {
                console.warn('No essayId found in localStorage.');
                // Handle case where no essay ID is provided
                document.getElementById(containerId).innerHTML = 
                    '<p class="error">No essay specified. Please select an essay from the <a href="essays.html">essays page</a>.</p>';
            }
        });
    </script>
</body>
</html> 