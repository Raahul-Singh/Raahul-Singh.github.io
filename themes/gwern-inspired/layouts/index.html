{{ define "main" }}
<section class="home-section">
    <div class="profile">
        <div class="profile-content">
            {{ with resources.Get "profile-image.jpg" }}
            <div class="profile-image">
                <img src="{{ .RelPermalink }}" alt="{{ $.Site.Params.author }}" width="150" height="150">
            </div>
            {{ end }}
            <div class="profile-info">
                <h1 class="profile-title">{{ .Site.Params.author }}</h1>
                <p class="profile-description">{{ .Site.Params.authorDescription }}</p>
            </div>
        </div>
    </div>

    {{ .Content }}

    <div class="sections-container">
        <section class="content-section">
            <h2 class="section-title">Recent Essays</h2>
            <div class="content-list">
                {{ $essays := where .Site.RegularPages "Type" "essays" | first 5 }}
                {{ if $essays }}
                <ul>
                    {{ range $essays }}
                    <li>
                        <a href="{{ .Permalink }}" class="content-item">
                            <span class="content-title">{{ .Title }}</span>
                            <span class="content-date">{{ .Date.Format "January 2, 2006" }}</span>
                        </a>
                        {{ with .Params.description }}
                        <p class="content-description">{{ . }}</p>
                        {{ end }}
                    </li>
                    {{ end }}
                </ul>
                <p class="view-all"><a href="/essays/">View all essays →</a></p>
                {{ else }}
                <p>No essays yet.</p>
                {{ end }}
            </div>
        </section>

        <section class="content-section">
            <h2 class="section-title">Recent Book Reviews</h2>
            <div class="content-list">
                {{ $books := where .Site.RegularPages "Type" "books" | first 5 }}
                {{ if $books }}
                <ul>
                    {{ range $books }}
                    <li>
                        <a href="{{ .Permalink }}" class="content-item">
                            <span class="content-title">{{ .Title }}</span>
                            {{ if .Params.author }}
                            <span class="content-author">by {{ .Params.author }}</span>
                            {{ end }}
                            <span class="content-date">{{ .Date.Format "January 2, 2006" }}</span>
                        </a>
                        {{ if .Params.rating }}
                        <div class="rating">
                            {{ $rating := int .Params.rating }}
                            {{ range seq $rating }}★{{ end }}
                            {{ if eq (mod .Params.rating 1) 0.5 }}½{{ end }}
                        </div>
                        {{ end }}
                    </li>
                    {{ end }}
                </ul>
                <p class="view-all"><a href="/books/">View all books →</a></p>
                {{ else }}
                <p>No book reviews yet.</p>
                {{ end }}
            </div>
        </section>
    </div>

    {{ if .Site.Params.features.searchEnabled }}
    <section class="search-section">
        <h2 class="section-title">Search</h2>
        <form id="search-form" class="search-form">
            <input type="search" id="search-input" placeholder="Search for content..." aria-label="Search">
            <button type="submit">Search</button>
        </form>
        <div id="search-results" class="search-results"></div>
    </section>
    {{ end }}
</section>
{{ end }} 